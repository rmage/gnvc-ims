<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptInvStockINDtl" pageWidth="850" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="810" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="10"/>
	<property name="ireport.y" value="0"/>
	<parameter name="NOBUKTI" class="java.lang.String"/>
	<parameter name="P_START_DATE" class="java.lang.String"/>
	<parameter name="P_END_DATE" class="java.lang.String"/>
	<parameter name="P_LOCATION" class="java.lang.String"/>
	<parameter name="P_DEALER_CODE" class="java.lang.String"/>
	<parameter name="P_BG_TYPE" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
B."NAME" AS REGIONAL
,BG.BG_CODE AS BG_CODE
,BG."NAME" AS BG_NAME
,BG.BG_TYPE_CODE AS ITEM_TYPE
,M.DOCUMENT_DATE AS RECEIVED_DATE -- ini diambil apa nya, confirm data apa document gr date nya ya
,ERP.ERP_DOCUMENT_NO AS DO_NUMBER
,U."NAME" AS RECEIVED_BY
,P.ITEM_CODE AS ITEM_CODE
,P."NAME" AS ITEM_NAME
,D.QUANTITY AS QTY
,PC."NAME" AS PRODUCT_CATALOG -- INI SERIAL, APA CONSIGNGEMT, APA NON SERIAL
,GRNG.SN_START AS SERIAL_START
,GRNG.SN_END AS SERIAL_END
FROM GR_MST M
LEFT JOIN BG BG ON M.BG_CODE=BG.BG_CODE
LEFT JOIN BRANCH B ON BG.BRANCH_CODE=B.BRANCH_CODE
LEFT JOIN "USER" U ON M.CONFIRM_BY=U.USER_ID
LEFT JOIN GR_DTL_CNF D ON M.DOCUMENT_NO = D.DOCUMENT_NO -- CNF, GR YG UDAH DI CONFIRM
LEFT JOIN PRODUCT P ON D.ITEM_CODE=P.ITEM_CODE
LEFT JOIN GR_DTL_CNF_RANGE GRNG ON GRNG.ITEM_CODE=D.ITEM_CODE
LEFT JOIN PRODUCT_CATALOG PC ON P.CATALOG_CODE = PC.CATALOG_CODE
LEFT JOIN IR_MST IR ON M.IR_DOCUMENT_NO=IR.DOCUMENT_NO
LEFT JOIN IR_ERP_MST ERP ON IR.DOCUMENT_NO = ERP.DOCUMENT_NO
LEFT JOIN GR_DTL_RANGE R ON D.DOCUMENT_NO=R.DOCUMENT_NO AND D.ITEM_CODE = R.ITEM_CODE
WHERE M.CONFIRM_STATUS='Y'
AND M.DOCUMENT_DATE >= to_date($P{P_START_DATE},'dd-mm-yyyy') and M.DOCUMENT_DATE <= to_date($P{P_END_DATE},'dd-mm-yyyy')
and BG.BG_CODE like $P{P_DEALER_CODE}
and BG.BRANCH_CODE like $P{P_LOCATION}
and BG.BG_TYPE_CODE like $P{P_BG_TYPE}]]>
	</queryString>
	<field name="REGIONAL" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="BG_CODE" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="BG_NAME" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ITEM_TYPE" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="RECEIVED_DATE" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="DO_NUMBER" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="RECEIVED_BY" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ITEM_CODE" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ITEM_NAME" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="QTY" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="PRODUCT_CATALOG" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="SERIAL_START" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="SERIAL_END" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="subTotalCalculation" class="java.math.BigDecimal" resetType="Group" resetGroup="bgCode" calculation="Sum">
		<variableExpression><![CDATA[$F{QTY}]]></variableExpression>
		<initialValueExpression><![CDATA[]]></initialValueExpression>
	</variable>
	<variable name="ROW_NUMBER" class="java.lang.Integer" resetType="Group" resetGroup="bgCode">
		<variableExpression><![CDATA[new Integer($V{ROW_NUMBER}.intValue()+1)]]></variableExpression>
		<initialValueExpression><![CDATA[new Integer(0)]]></initialValueExpression>
	</variable>
	<group name="bgCode">
		<groupExpression><![CDATA[$F{BG_CODE}]]></groupExpression>
		<groupHeader>
			<band height="21">
				<textField>
					<reportElement x="26" y="0" width="100" height="20"/>
					<textElement>
						<font isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{BG_CODE}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="26" y="20" width="744" height="1"/>
				</line>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="26">
				<line>
					<reportElement x="26" y="2" width="744" height="1"/>
				</line>
				<staticText>
					<reportElement x="26" y="5" width="39" height="20"/>
					<textElement>
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[SUB TOTAL]]></text>
				</staticText>
				<textField>
					<reportElement x="65" y="5" width="100" height="20"/>
					<textElement>
						<font isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{BG_CODE}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="26" y="25" width="744" height="1"/>
				</line>
				<textField>
					<reportElement x="720" y="5" width="50" height="20"/>
					<textElement/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{subTotalCalculation}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band/>
	</background>
	<title>
		<band/>
	</title>
	<pageHeader>
		<band height="4"/>
	</pageHeader>
	<columnHeader>
		<band height="62">
			<staticText>
				<reportElement key="staticText-62" mode="Opaque" x="489" y="10" width="77" height="50" forecolor="#000000" backcolor="#EDECEB"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="SansSerif" size="11" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Product Code ERP]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-62" mode="Opaque" x="245" y="10" width="86" height="50" forecolor="#000000" backcolor="#EDECEB"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="SansSerif" size="11" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Recieved By]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-62" mode="Opaque" x="566" y="10" width="77" height="50" forecolor="#000000" backcolor="#EDECEB"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="SansSerif" size="11" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Start Serial Code]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-62" mode="Opaque" x="428" y="10" width="61" height="50" forecolor="#000000" backcolor="#EDECEB"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="SansSerif" size="11" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Item Type]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-62" mode="Opaque" x="150" y="10" width="95" height="50" forecolor="#000000" backcolor="#EDECEB"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="SansSerif" size="11" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Delivery Order]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-62" mode="Opaque" x="720" y="10" width="50" height="50" forecolor="#000000" backcolor="#EDECEB"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="SansSerif" size="11" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[QTY]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-62" mode="Opaque" x="643" y="10" width="77" height="50" forecolor="#000000" backcolor="#EDECEB"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="SansSerif" size="11" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[End Serial Code]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-62" mode="Opaque" x="65" y="10" width="85" height="50" forecolor="#000000" backcolor="#EDECEB"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="SansSerif" size="11" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Recieved Datetime]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-62" mode="Opaque" x="331" y="10" width="97" height="50" forecolor="#000000" backcolor="#EDECEB"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="SansSerif" size="11" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Product Name]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-62" mode="Opaque" x="26" y="10" width="39" height="50" forecolor="#000000" backcolor="#EDECEB"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="SansSerif" size="11" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[No.]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement isPrintRepeatedValues="false" x="65" y="0" width="85" height="20"/>
				<textElement/>
				<textFieldExpression class="java.sql.Timestamp"><![CDATA[$F{RECEIVED_DATE}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="150" y="0" width="95" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{DO_NUMBER}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="245" y="0" width="86" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{RECEIVED_BY}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="26" y="0" width="39" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{ROW_NUMBER}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,##0.00" isBlankWhenNull="false">
				<reportElement x="720" y="0" width="50" height="20"/>
				<textElement/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{QTY} != null ? $F{QTY} : new BigDecimal(0)]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="331" y="0" width="97" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{ITEM_NAME}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="428" y="0" width="61" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{ITEM_TYPE}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="489" y="0" width="77" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{PRODUCT_CATALOG}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="566" y="0" width="77" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{SERIAL_START}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="643" y="0" width="77" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{SERIAL_END}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
